{% extends 'base.html' %} 
{% load static %} 
{% block title %}Profile{% endblock %} 

{% block content %}

{% if user.image %}
<img src="{{ user.image.url }}" class="rounded img-thumbnail" onerror="if (this.src != '/media/default.jpg') this.src = '/media/default.jpg';" style="max-width: 200px;">
<h1 class="d-inline align-bottom">@{{ page_user }}</h1>
{% else %} 
<img src="/media/default.jpg" class="rounded img-thumbnail" style="max-width: 200px;">
<h1 class="d-inline align-bottom">@{{ page_user }}</h1>
{% endif %} 

{% if request.user == page_user %}
          <a href="{% url 'edit_profile' user.id %}" class="link-secondary d-inline ms-3 align-bottom">Edit Profile</a>
{% else %}
        <p class="d-inline ms-3 align-bottom">
          <a href="{% url 'send_friend_request' userID=page_user.id %}" class="link-secondary mx-2">Add Friend</a>
           | 
           {% if request.user in followers %}
           <a href="{% url 'unfollow' userID=page_user.id %}" class="link-secondary d-inline ms-3 align-bottom" >Unfollow</a>
           {% else %}
           <a href="{% url 'follow' userID=page_user.id %}" class="link-secondary d-inline ms-3 align-bottom" >Follow</a>
           {% endif %}
          
        </p>
{% endif %}

</br>
<legend class="border-bottom my-4">About Me</legend>

<div data-bs-spy="scroll" data-bs-target="#navbar-example2" data-bs-offset="0" tabindex="0">
    <p class="ms-4">
        {% if page_user.bio %}
            {{ page_user.bio }}
        {% else %}
            I have no bio yet.
        {% endif %}
    </p>
</div>
<legend class="border-bottom my-4"></legend>
<h6>
    <a href = "{% url 'friends' %}" class="link-secondary">{{ friends }} Friends</a>
    <p class="d-inline mx-3">|</p>
    <a href = "{% url 'follow-list' %}" class="link-secondary">{{ num_following }} Following</a>
    <p class="d-inline mx-3">|</p>
    <a href = "{% url 'follow-list' %}" class="link-secondary">{{ num_followers }} Followers</a>

    {% if request.user in following %}
    <p class="d-inline mx-3">|</p>
    Follows you
    {% endif %}
</h6>


{% endblock %} 
